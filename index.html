<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Runner - Custom Billboards</title>
  <!-- Bulma CSS for simple open-source UI components -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- top banner removed; controls and score are rendered over the game canvas -->

  <main>
    <div id="game-wrap">
      <div id="top-overlay">
        <div class="overlay-left">
          <div class="label score-label"><span class="label-key">Score:</span><span class="label-val" id="score">0</span></div>
          <div class="label distance-label"><span class="label-key">Distance:</span><span class="label-val" id="distance">0</span><span class="label-unit"> m</span></div>
        </div>
        <div class="overlay-right">
          <button id="config-btn" class="button is-light is-small">Graphic Config</button>
          <button id="game-config-btn" class="button is-light is-small">Game Config</button>
          <button id="scores-btn" class="button is-light is-small">High Scores</button>
        </div>
      </div>
      <canvas id="game" width="1280" height="720"></canvas>
  <div id="signature">orlandocali</div>
      <div id="bottom-controls">
        <button id="start-btn" class="button is-primary">Start</button>
      </div>
      <button id="jump-btn" class="jump-button">Jump</button>
      <div id="debug-box" class="debug-box" aria-hidden="true">
        <div class="dbg-header"><strong>Physics telemetry</strong><button id="dbg-close" class="dbg-close" title="Hide">âœ•</button></div>
        <div class="dbg-row">
          <div class="pair"><span class="dbg-key">Gravity:</span> <span class="dbg-val" id="dbg-g">0</span></div>
          <div class="pair"><span class="dbg-key">Jump H:</span> <span class="dbg-val" id="dbg-jh">-</span></div>
        </div>
        <div class="dbg-row">
          <div class="pair"><span class="dbg-key">Y:</span> <span class="dbg-val" id="dbg-y">0</span></div>
          <div class="pair"><span class="dbg-key">Vy:</span> <span class="dbg-val" id="dbg-vy">0</span></div>
        </div>
        <div class="dbg-row">
          <div class="pair"><span class="dbg-key">Obs spd:</span> <span class="dbg-val" id="dbg-os">-</span></div>
          <div class="pair"><span class="dbg-key">Obs gap:</span> <span class="dbg-val" id="dbg-og">-</span></div>
        </div>
      </div>
    </div>

    <div id="config-panel" class="modal">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head"><p class="modal-card-title">Billboard Configuration</p><button id="close-config" class="delete" aria-label="close"></button></header>
        <section class="modal-card-body">
      <div class="field">
        <label class="label">Billboards vertical offset</label>
        <div class="control"><input id="setting-bb-offset" type="range" min="0" max="200" value="80" /></div>
        <p class="help">Lower value moves billboards up; higher value moves them down (px relative)</p>
      </div>
      <!-- graphic panel only includes billboard & background uploads -->
      <div class="upload-row">
        <label>Left Billboard image
          <input type="file" id="billboard-left" accept="image/*" />
        </label>
        <img id="preview-left" class="preview" alt="left preview" />
      </div>
      <div class="upload-row">
        <label>Center Billboard image
          <input type="file" id="billboard-center" accept="image/*" />
        </label>
        <img id="preview-center" class="preview" alt="center preview" />
      </div>
      <div class="upload-row">
        <label>Right Billboard image
          <input type="file" id="billboard-right" accept="image/*" />
        </label>
        <img id="preview-right" class="preview" alt="right preview" />
      </div>
      <div class="upload-row">
        <label>Background image
          <input type="file" id="background-image" accept="image/*" />
        </label>
        <img id="preview-bg" class="preview" alt="background preview" />
      </div>
        </section>
        <footer class="modal-card-foot">
          <button id="save-config" class="button is-success">Save</button>
          <button id="reset-config" class="button">Reset to default</button>
        </footer>
      </div>
    </div>

    <!-- Game configuration modal (password-protected) -->
    <div id="game-panel" class="modal">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head"><p class="modal-card-title">Game Configuration</p><button id="close-game-config" class="delete" aria-label="close"></button></header>
        <section class="modal-card-body">
      <div class="field">
        <label class="label">Obstacle spacing</label>
        <div class="control"><input id="setting-obs-spacing" type="range" min="0" max="100" value="50" /></div>
        <p class="help">Lower value increases average gap between obstacles (easier)</p>
      </div>
      <div class="field">
        <label class="label">Obstacle base speed</label>
        <div class="control"><input id="setting-obs-speed" type="range" min="80" max="360" value="160" /></div>
        <p class="help">Base obstacle speed in px/sec (lower is easier)</p>
      </div>
      <div class="field">
        <label class="label">Jump height</label>
        <div class="control"><input id="setting-jump-height" type="range" min="20" max="400" value="120" /></div>
        <p class="help">Set the approximate peak height (pixels) the player will reach when jumping</p>
      </div>
      <div class="field">
        <label class="label">Hang time tuning (min gravity multiplier)</label>
        <div class="control"><input id="setting-min-grav" type="range" min="0.2" max="1" step="0.05" value="0.45" /></div>
        <p class="help">Lower values increase hang time on small screens (0.2..1)</p>
      </div>
      <div class="field">
        <label class="label">Global gravity multiplier</label>
        <div class="control"><input id="setting-grav-global" type="range" min="0.5" max="1.5" step="0.05" value="1" /></div>
        <p class="help">Fine tune overall airtime; values &lt;1 increase hang time</p>
      </div>
      <div class="field">
        <label class="checkbox"><input id="setting-show-physics" type="checkbox" /> Show physics window</label>
        <p class="help">Toggle the on-screen physics telemetry window</p>
      </div>
      <div class="field">
        <label class="checkbox"><input id="setting-width-scale" type="checkbox" /> Use width-based physics scaling</label>
        <p class="help">When enabled jump/gravity scale with window width (alternative to height)</p>
      </div>
        </section>
        <footer class="modal-card-foot">
          <button id="save-game-config" class="button is-success">Save</button>
          <button id="reset-game-config" class="button">Reset to default</button>
        </footer>
      </div>
    </div>

    <div id="scores-panel" class="modal">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head"><p class="modal-card-title">High Scores</p><button id="close-scores" class="delete" aria-label="close"></button></header>
        <section class="modal-card-body">
          <div class="field has-addons">
            <div class="control is-expanded"><input id="scores-find" class="input" placeholder="Find by name..." /></div>
            <div class="control"><button id="scores-find-btn" class="button">Find</button></div>
          </div>
          <div class="table-container">
            <table id="scores-table" class="table is-fullwidth is-striped is-hoverable">
              <thead>
                <tr>
                  <th><button id="sort-pos" class="button is-small" disabled>Pos</button></th>
                  <th><button id="sort-name" class="button is-small">Name</button></th>
                  <th><button id="sort-points" class="button is-small">Points</button></th>
                  <th><button id="sort-distance" class="button is-small">Distance</button></th>
                </tr>
              </thead>
              <tbody id="scores-tbody"></tbody>
            </table>
          </div>
        </section>
        <footer class="modal-card-foot">
          <div class="buttons">
            <button id="scores-prev" class="button">Prev</button>
            <button id="scores-next" class="button">Next</button>
            <button id="clear-scores" class="button is-danger">Clear Scores</button>
          </div>
        </footer>
      </div>
    </div>

    <!-- password modal for protected config/clear actions -->
    <div id="pw-modal" class="modal">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head"><p class="modal-card-title">Enter password</p><button id="close-pw" class="delete" aria-label="close"></button></header>
        <section class="modal-card-body">
          <div class="field"><label class="label">Password</label><div class="control"><input id="pw-input" class="input" type="password" /></div></div>
        </section>
        <footer class="modal-card-foot">
          <button id="pw-ok" class="button is-success">OK</button>
          <button id="pw-cancel" class="button">Cancel</button>
        </footer>
      </div>
    </div>

    <div id="game-over" class="modal">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head"><p class="modal-card-title">Game Over</p></header>
        <section class="modal-card-body">
          <p>Your score: <strong><span id="final-score">0</span></strong></p>
          <div class="field"><label class="label">Save as</label><div class="control"><input id="save-name" class="input" /></div></div>
        </section>
        <footer class="modal-card-foot">
          <button id="save-score-btn" class="button is-success">Save Score</button>
          <button id="close-gameover" class="button">Close</button>
        </footer>
      </div>
    </div>

  </main>

  <script src="storage.js"></script>
  <script src="controller.js"></script>
  <script src="physics.js"></script>
  <script src="config.js"></script>
  <script src="game.js"></script>
  <script src="main.js"></script>
</body>
</html>